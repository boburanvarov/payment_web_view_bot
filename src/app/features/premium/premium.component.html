<div class="screen premium-screen">
    <div class="page-header">
        <button class="back-btn" (click)="goBack()">
            <i class="fas fa-chevron-left"></i>
        </button>
        <h2>{{ 'premium.title' | translate }}</h2>
        <div class="spacer"></div>
    </div>

    <!-- Loading State -->
    <app-loading-state *ngIf="isLoading()"></app-loading-state>

    <!-- Empty State -->
    <app-empty-state *ngIf="!isLoading() && !plansResponse()" [message]="'premium.noPlansAvailable'"
        [imageSrc]="'assets/img/transaction-empty.png'">
    </app-empty-state>

    <!-- Content -->
    <ng-container *ngIf="!isLoading() && plansResponse()">
        <!-- Period Toggle -->
        <div class="period-toggle">
            <button *ngFor="let cycle of cycles" class="toggle-btn" [class.active]="cycle.selected"
                (click)="togglePeriod(cycle.cycle)">
                {{ cycle.label }}
                <span class="discount-badge" *ngIf="cycle.discountLabel">{{ cycle.discountLabel }}</span>
            </button>
        </div>

        <!-- Subscription Plans -->
        <div class="plans-container">
            <div class="plan-card" *ngFor="let plan of plans" [class.premium]="plan.highlighted">
                <div class="plan-badge">{{ plan.badgeText }}</div>

                <div class="plan-price">
                    <span class="amount">{{ plan.priceLabel }}</span>
                </div>

                <p class="plan-description">{{ plan.description }}</p>

                <div class="plan-features">
                    <div class="feature-item" *ngFor="let feature of plan.featureDetails">
                        <i class="fas fa-check"></i>
                        <span>{{ feature.description }}</span>
                    </div>
                </div>

                <button class="plan-btn" [class.current]="plan.current" [class.active]="!plan.current"
                    [disabled]="plan.current" (click)="selectPlan(plan)">
                    {{ plan.ctaText }}
                </button>
            </div>
        </div>
    </ng-container>
</div>

<app-subscription-modal [isOpen]="showSubscriptionModal" [plan]="selectedPlanForModal" (close)="onModalClose()"
    (success)="onSubscriptionSuccess()">
</app-subscription-modal>